---
layout: post
title: Time use and fertility rates
date: 2025-07-26
tag: 
   - ModellingStrategy
   - DataFromTheWeb
description: I look into a cross-country repression of fertility rate on the gender split of time spent on care and domestic chores.
image: /img/0290-dg.svg
socialimage: https:/freerangestats.info/img/0290-dg.png
category: R
---

## Pre-data musings on time-use and number of children
Some months ago a post floated across my Bluesky feed making an argument to the effect of "if societies want more children, then men should do more of the housework", accompanied by a chart from a few-years-old paper.  The chart was a scatter plot with something like male share of domestic chores on the horizontal axis and total fertility rate on the vertical axis&mdash;each point was one of selected OECD countries at a point in time for which data on both variables was available&mdash;and there was a definite positive correlation. 

The case was being made that if you think the world isn't having enough children (not something I personally subscribe to but let's accept it as a problem for some people), the answer might be more feminism and gender equality, not less. And the obvious context being the various pro-traditionalism, trad-wife, etc arguments to the opposite effect, going around in the altogether rather contemptible (again, obviously just my own view) pro-natalism discourse.

> Might as well get on the record, while it's not relevant statistically, that I'm fully for more feminism and gender equality, and I also think "and then women will have more children" is a bad argument for it.

Unfortunately both the Bluesky post I saw and the original article have now escaped me, but I do remember that the data was a bit old (2010s), and some people commenting 'ah, woke Scandinavian country X where men do lots of housework, but since the time in this chart *they* have stopped having as many children too'. More importantly, I was intrigued by the use of "selected countries" in the title. Selected how and why, I wondered at the time. 

Obviously, limiting the analysis to rich countries gives a narrow view on a bigger relationship. Because one of the strongest empirical relationships in demography, on a historical scale, is the observation that as women and girls get more educational and economic opportunities they tend to have less children, in terms of a society-wide average of a country going through economic development. 

> I'm old enough to remember when everyone I engaged with seemed to agree this was a good thing, both in terms of the extra opportunities and choices for women as a good in itself, and avoiding cramming too many people into an already crowded and under-resourced planet. Apparently this is no longer a consensus, which just leaves me, I don't know, stroking my grey beard and feeling the world's passed me by.

I would expect, world-wide, that women do a higher share of the housework in countries where they have less economic opportunities (would you call these more patriarchal and 'traditional' societies? somewhat difficult to get a non-offensive terminology here).  In fact, what I'd expect is a diagram of causes and effects that looks something like this:

<object type="image/svg+xml" data='/img/0290-dg.svg' width='100%'><img src='/img/0290-dg.png' width='100%'></object>

In this model, economic and education opportunities for women and girls leads to choices to have less children and a decrease in total fertility rate, shown with a red arrow because of the downwards impact. Men doing more housework as a result of a rising culture of gender equality and changing social norms has an impact (probably smaller) in the opposite direction, with a blue arrow. That culture of gender equality itself comes about partly from changing economic conditions (women moving in to visible roles) and partly advocacy. Naturally, this is a gross over-simplification of the reality of these processes.

This isn't a directed acyclic graph (DAG) because it's not acyclic - some of the arrows are two-way, such as economic growth leading to more economic and educational opportunities for women and girls, and economic and educational opportunities for women  and girls leading to economic growth. But you could reduce it to a DAG if you limited it to the three key variables of total fertility rate, men doing housework, and opportunities for women and girls.

<object type="image/svg+xml" data='/img/0290-dg-simplified.svg' width='100%'><img src='/img/0290-dg-simplified.png' width='100%'></object>

This simplified version doesn't make it clear where increased opportunities for women and girls come from or why they lead to men doing more of the housework; the original diagram shows that this was expected to happen via the (difficult to observe and complex to evolve) mediating factor of a general culture of gender equality. 

The simplified diagram helps us think through what would happen if we ignore the confounder of "economic and educational opportunities for women and girls" and just plot male share of domestic chores against total fertility rate. 

* On a simple two-variable scatter plot, we'd expect a negative correlation, because the time use variable is actually standing in as a proxy for the more important gender equality of opportunities. 
* But if you could get a better indicator of that confounding opportunities variable and control for it, and if there really is an impact from male share of housework on higher fertility decisions, you *might* get a positive effect of male share of domestic work on fertility.

The code for drawing those graphs, and in general setting up the session for subsequent confronting these more theoretical musings with data is below. There's one clever trick to colour-code the edges, I haven't seen this documented elsewhere, you need to use the hidden `ggdag::tidy_daggity` function explicitly and add a colour column (with the actual colours you want to use as character strings) before sending it to ggplot:

{% highlight R lineanchors %}
library(tidyverse)
library(httr)
remotes::install_github("hrbrmstr/curlconverter")
library(curlconverter)
library(janitor)
library(countrycode)
library(rsdmx)   # for reading the World Economic Outlook data
library(WDI)     # for gettting literacy data from the World Development Indicators
library(readxl)
library(glue)
library(ggrepel)
library(mgcv)   # for gam
library(ggdag)
library(MASS)   # for rlm
library(RColorBrewer)

conflicts_prefer(dplyr::lag)
conflicts_prefer(dplyr::select)

#-----------drawing a DAG (or at least a DG)------------------

# Full version with all the variables
dg <- dagify(tfr ~ opp + hw ,
             ge ~ opp + advoc, 
             opp ~ ge + advoc,
             hw ~ ge,
             opp ~ gdp,
             gdp ~ opp,
             
             labels = c(
               "tfr" = "Total fertility rate",
               "hw" = "Men doing housework",
               "opp" = "Opportunities for\nwomen and girls",
               "ge" = "Culture of\ngender equality",
               "gdp" = "Economic growth",
               "advoc" = "Feminist advocacy"
             ),
             outcome = "tfr",
             latent = "ge",
             exposure = "hw"
) |> 
  # explicitly call this usually hidden function so we can colour the edges:
  ggdag::tidy_dagitty(seed = 124) |> 
  # colour the edges. Need to specify identity of colour here, not use scale_
  mutate(edge_type = ifelse(to == "tfr" & name == "opp", "darkred", "steelblue"))

lab_col <- "black"

# Draw the full chart
set.seed(124)
dg |> 
  ggplot(aes(x = x, y = y, xend = xend, yend =yend)) +
  geom_dag_node(colour = "grey") +
  geom_dag_text_repel(aes(label = label), col = lab_col) +
  geom_dag_edges(aes(edge_colour = edge_type),
                 arrow_directed = grid::arrow(length = unit(12, "pt"), type = "closed")) +
  theme_dag(base_family = "Roboto")

# Simplified DAG, just with 3 nodes
dg2 <- dagify(tfr ~ opp + hw ,
             hw ~ opp,

             labels = c(
               "tfr" = "Total fertility rate",
               "hw" = "Men doing housework",
               "opp" = "Opportunities for\nwomen and girls"
             ),
             outcome = "tfr",
             exposure = "hw"
)  |> 
  # explicitly call this usually hidden function so we can colour the edges:
  ggdag::tidy_dagitty(seed = 124) |> 
  # colour the edges. Need to specify identity of colour here, not use scale_
  mutate(edge_type = ifelse(to == "tfr" & name == "opp", "darkred", "steelblue"))

# Draw the simplified causal graph
set.seed(125)
dg2 |> 
  ggplot(aes(x = x, y = y, xend = xend, yend =yend)) +
  geom_dag_node(colour = "grey") +
  geom_dag_edges(aes(edge_colour = edge_type), 
                 arrow_directed = grid::arrow(length = unit(12, "pt"), type = "closed")) +
  geom_dag_text_repel(aes(label = label), col = lab_col) +
  theme_dag(base_family = "Roboto")
{% endhighlight %}


## ... All others must bring data

OK then let's look at some data. Sustainable Development Goals (SDG) Indicator 5.4.1 is ["the Proportion of time spent on unpaid domestic chores and care work, by sex, age and location (%)"](https://metadata.un.org/sdg/SL_DOM_TSPD?lang=en), which is fantastic because it means we have an internationally agreed standard on how this is measured, and what data is available will be in the United Nations Statistical Division's definitive database of the SDG indicators. Data won't be available for all countries, and certainly not for all years in all countries, because it depends on a difficult and expensive time use survey. Very few countries can afford to prioritise one of these regularly and frequently, and many have never had one at all.

For the vertical axis, we can get total fertility rate from various sources, but one convenient one that gives an estimate for each country for each year on a standardised, comparable basis is the UN's World Population Prospects.

We have several challenges in using this data:
* the official SDG indicators don't actually include an obvious single dimensional summary of gender share of housework, so we will need to construct it with something like `male_share = male / (male + female)`. Where `male` is the proportion of men's time spent on dometic chres and carework, `female` the equivalent for women. We can make a composite indicator like this because the denominator (total time in the day) for both `male` and `female` is the same.
* some countries have multiple observations (more than one year with a time use survey) and we'd like to incorporate them somehow. This implies some kind of multilevel model with a country-level random effect as well as residual randomness at the country-year level.
* the years of time use surveys vary significantly over a 20+ year time period, so we should expect a possible time effect to complicate any inference we do.
* not all the age groups are equivalent across countries, so we will have to grit our teeth for some inconsistent definitions of women and men (i.e. when does adulthood start)

My first intent is to get this chart that tries to at least represent the full range of these issues and imply a modelling strategy that would take them into account:
<object type="image/svg+xml" data='/img/0290-simple-scatter.svg' width='100%'><img src='/img/0290-simple-scatter.png' width='100%'></object>

As expected, there's a strongish negative relationship here, consistent with my thinking about economic and educational opportunities for women and girls being an important confounding variable. 

Here's how I downloaded the data and got to that chart. I don't know of an R package to simplify access the UN SDGs database so had to hit the API directly, with some old-fashioned and clunky but working `httr` code. The Population Prospects is easy enough to download as a single big CSV. Combining the data in a way that preserves the multiple observations per country needs a little care:

{% highlight R lineanchors %}
#-----------downloading some SDG time use data from the UN database-------------
# Note sure this is the best way to do this, it was clunky to work out,
# but it works. Someone should (or have they already?) build an R package.
#
# this is all httr, I understand httr2 is the  current thing now, but this still works 
request <- "curl -X POST --header 'Content-Type: application/x-www-form-urlencoded' --header 'Accept: application/octet-stream' -d 'seriesCodes=SL_DOM_TSPD' 'https://unstats.un.org/sdgapi/v1/sdg/Series/DataCSV'" |> 
  straighten() |> 
  make_req()

gender_txt <- content(request[[1]](), as = "text")

gender <- read_csv(gender_txt) |> 
  clean_names()

count(gender, sex)      # two categories, FEMALE and MALE - no TOTAL
count(gender, age)      # many different ages used for different countries
count(gender, location) # there's ALLAREA, RURAL and URBAN

# should be only one indicator:
stopifnot(length(unique(gender$series_description)) == 1)
# which is 
# Proportion of time spent on unpaid domestic chores and care work, by sex, age and location (%) 

time_chores <- gender |> 
  # we don't want rural and urban, just country total:
  filter(location == "ALLAREA") |> 
  # we want the ages like 15+, 12+ etc, not those like 15-59 with an upper bound
  filter(grepl("^[0-9]*\\+$", age)) |> 
  # but not the retirees, which some countries include. We want the 15+, not 15+
  # and 65+ separately:
  filter(!age %in% c("65+", "85+", "60+")) |> 
  # calculate the male time spent as a proportion of total (male and female) time spent
  group_by(geo_area_name, time_period, age) |> 
  summarise(prop_male = value[sex == 'MALE'] / sum(value[sex == 'MALE'] + value[sex == 'FEMALE'])) |> 
  group_by(geo_area_name) |> 
  # Label the latest survey per country. Note that any modelling needs to
  # include a country random effect for the multiple observations per country:
  mutate(is_latest = ifelse(time_period == max(time_period), "Most recent", "Earlier")) |> 
  # limit to just the best age group, closest to adults, for each country/time:
  group_by(geo_area_name, time_period) |> 
  mutate(age = factor(age, levels = c("15+", "16+", "18+", "12+", "10+", "6+", "5+", "3+"))) |> 
  arrange(geo_area_name, time_period, age) |> 
  slice(1) |> 
  ungroup() |> 
  mutate(iso3_code = countrycode(geo_area_name, origin = "country.name.en", destination = "iso3c"))


#--------combine time use with fertility data and draw simple scatter plot----------

# total fertility rate, from the UN Population Projections
if(!file.exists("wpp2024.csv")){
  download.file("https://population.un.org/wpp/assets/Excel%20Files/1_Indicator%20(Standard)/CSV_FILES/WPP2024_Demographic_Indicators_Medium.csv.gz",
                destfile = "wpp2024.csv", mode = "wb")
}

wpp <- read_csv("wpp2024.csv") |> 
  clean_names() |> 
  select(iso3_code, time_period = time, tfr) |> 
  filter(!is.na(iso3_code))
 
# Draw plot
time_chores |>
  left_join(wpp, by = c("iso3_code", "time_period")) |> 
  ggplot(aes(x = prop_male, y = tfr)) +
  geom_smooth(method = "lm", colour = "white") +
  geom_point(aes(shape = is_latest, colour = time_period), size = 2) +
  geom_path(aes(group = geo_area_name), colour = "grey75") +
  scale_shape_manual(values = c(1, 19)) +
  scale_x_continuous(label = percent) +
  scale_y_continuous() +
  guides(colour =  guide_colorbar(display = "rectangles")) +
  theme(legend.key.width = unit(10, "mm")) +
  labs(x = "Proportion of domestic and care work done by males",
       y ="Total fertility rate",
       colour = "Observation date:",
       shape = "Observation type:",
       title = "Gender share of domestic work and fertility rate",
       subtitle = "When including all countries, relationship between male share of domestic and care work and fertility is negative.
Confounding effect of economic and educational opportunities for women and girls has not been controlled for.",
       caption = "Time use data from the UN SDGs database; total fertility rate from the UN World Population Prospects. Analysis by freerangestats.info.")
{% endhighlight %}


text here introduce the addition of GDP and this chart

<object type="image/svg+xml" data='/img/0290-facet-scatter.svg' width='100%'><img src='/img/0290-facet-scatter.png' width='100%'></object>


{% highlight R lineanchors %}
#-----------------add income and do a four facet plot-----------------

# so income must be a confounder. We can use the IMF WEO data from last week
# (see that blog for how to access it, or run 0288-IMF-WEO.R script in this
# same repository)
if(!exists("d2025")){
  d2025 <- readSDMX("WEOAPR2025/xmlfile_APR2025.xml", isURL = FALSE) |> 
    # this parsing takes a long time:
    as_tibble()
}

ref_areas <-   read_xlsx("WEOAPR2025/WEOPUB_DSD_APR2025.xlsx", sheet = "REF_AREA", skip = 7)[, 1:2] |> 
  rename(REF_AREA = Code,
         country = Description)

gdp <- d2025 |> 
  filter(CONCEPT == "NGDPRPPPPC") |> 
  select(time_period = TIME_PERIOD,
         gdprppppc = OBS_VALUE,
         REF_AREA) |> 
  mutate(gdprppppc = as.numeric(gdprppppc),
         time_period = as.numeric(time_period)) |> 
  filter(!is.na(gdprppppc)) |> 
  left_join(ref_areas, by = "REF_AREA") |> 
  mutate(iso3_code = countrycode(country, origin = "country.name.en", destination = "iso3c")) |> 
  filter(!is.na(iso3_code)) |> 
  select(-REF_AREA)

combined <- time_chores |> 
  left_join(wpp, by = c("iso3_code", "time_period")) |> 
  left_join(gdp, by = c("iso3_code", "time_period")) |> 
  # missing data for GDP for Cuba and Reunion
  filter(!is.na(gdprppppc)) |>
  # get the latest gdp per capita for each country, for stable categorisation 
  # based on just one number (I use latest instead of earliest because if
  # we are going to use just one number, it will be the most recent):
  group_by(geo_area_name) |> 
  arrange(time_period) |> 
  mutate(latest_gdp = gdprppppc[time_period == max(time_period)]) |> 
  ungroup() |> 
  mutate(gdp_cut = cut(gdprppppc, breaks = quantile(unique(latest_gdp), na.rm = TRUE),
                       include.lowest = TRUE,
                       labels = c("Lowest income", "Low income", 
                                  "Medium income", "High income"))) |> 
  # there's an annoying problem with some countries eg China being split
  # and sometimes in "Lowest income", sometimes "low income" because they 
  # are right on the cut's quantile. So we need to fix this:
  group_by(geo_area_name) |> 
  # note that if you used ifelse instead of if_else, it loses the levels of gdp_cut.
  # but this method works:
  mutate(gdp_cut = if_else(geo_area_name != lag(geo_area_name) | is.na(lag(geo_area_name)), gdp_cut, lag(gdp_cut))) |> 
  ungroup()

# check we got the right categories for "gdp_cut":
select(combined, geo_area_name, time_period, gdprppppc, latest_gdp, gdp_cut)
  
# check a country like China is in the same category each time, despite
# their income changing:
filter(combined, geo_area_name == "China") |> select(gdp_cut)


# some interesting countries to highlight
hlc <- c("Malawi", "Kyrgyzstan", "China", "Egypt", 
         "Brazil", "Oman", "Hungary", "Qatar", "Canada",
         "Australia")

combined |> 
  ggplot(aes(x = prop_male, y = tfr))+
  facet_wrap(~gdp_cut, scales = "fixed") +
  geom_smooth(method = "rlm", colour = "white") +
  geom_point(aes(shape = is_latest, colour = time_period), size = 2) +
  geom_path(aes(group = geo_area_name), colour = "grey50") +
  geom_text_repel(data = filter(combined, geo_area_name %in% hlc & is_latest == "Most recent"),
                  aes(label = glue("{geo_area_name}, {time_period}")), colour = "black") +
  scale_shape_manual(values = c(1, 19)) +
  scale_x_continuous(label = percent) +
  scale_y_log10() +
  guides(colour =  guide_colorbar(display = "rectangles")) +
  theme(legend.key.width = unit(10, "mm")) +
  labs(x = "Proportion of domestic and care work done by males",
       y ="Total fertility rate",
       colour = "Observation date:",
       shape = "Observation type:",
       title = "Share of domestic work and fertility rate, for countries in different income categories",
       subtitle = "Countries classified into custom groups based on purchasing power parity GDP at the time of first time-use survey. Selected countries labelled.",
       caption = "Time use data from the UN SDGs database; total fertility rate from the UN World Population Prospects; GDP from the IMF World Economic Outlook. Analysis by freerangestats.info.")
{% endhighlight %}





{% highlight R lineanchors %}


{% endhighlight %}



{% highlight R lineanchors %}


{% endhighlight %}

